<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ranniå®å®èµ·åºŠå•¦</title>

  <style>
    :root{
      /* æ¢¦å¹»ç´«ä¸»é¢˜ */
      --bgA:#0b0620;
      --bgB:#1a0f3a;
      --bgC:#7c3aed;
      --bgD:#d8b4fe;
      --bgE:#f5e9ff;

      --ink:#1b1530;
      --muted:#6b5a95;
      --card: rgba(255,255,255,.86);
      --border: rgba(255,255,255,.22);
      --shadow: 0 18px 44px rgba(20, 8, 60, .22);
      --r:20px;

      --accent:#a78bfa;
      --accent2:#fb7185;
    }
    *{box-sizing:border-box}

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "PingFang SC","Microsoft Yahei", Arial;
      color:var(--ink);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      background:
        radial-gradient(980px 560px at 12% 10%, var(--bgE), transparent 62%),
        radial-gradient(980px 560px at 92% 18%, var(--bgD), transparent 62%),
        radial-gradient(900px 520px at 55% 96%, rgba(124,58,237,.42), transparent 62%),
        radial-gradient(700px 420px at 50% 40%, rgba(251,113,133,.16), transparent 60%),
        linear-gradient(180deg, var(--bgA), var(--bgB));
    }

    .wrap{width:min(980px, 100%)}
    .top{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom:12px; flex-wrap:wrap;
    }
    .pill{
      padding:8px 12px;
      border:1px solid rgba(255,255,255,.26);
      background: rgba(255,255,255,.78);
      border-radius:999px;
      font-size:13px;
      color:var(--muted);
      box-shadow: 0 10px 26px rgba(20,8,60,.16);
      user-select:none;
      backdrop-filter: blur(8px);
    }

    .card{
      background:var(--card);
      border:1px solid rgba(255,255,255,.24);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }

    .main{
      display:grid;
      grid-template-columns: 380px 1fr;
      gap:14px;
      padding:14px;
    }
    @media (max-width: 900px){ .main{grid-template-columns:1fr} }

    /* å·¦ä¾§è´´çº¸ */
    .sticker{
      width:100%;
      aspect-ratio: 1 / 1;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.22);
      background:
        radial-gradient(240px 240px at 28% 20%, rgba(255,255,255,.95), rgba(245,233,255,.92));
      box-shadow: 0 18px 42px rgba(20,8,60,.18);
      position:relative;
      overflow:hidden;
    }
    .st-bubble{
      position:absolute; top:14px; left:14px;
      background: rgba(255,255,255,.92);
      border:1px solid rgba(255,255,255,.24);
      border-radius:16px;
      padding:10px 12px;
      font-weight:900;
      box-shadow: 0 12px 26px rgba(20,8,60,.14);
      white-space:pre-line;
      max-width:80%;
      z-index:3;
    }
    .chars{
      position:absolute; inset:0;
      display:flex;
      align-items:flex-end;
      justify-content:space-around;
      padding:64px 16px 16px;
      gap:12px;
      z-index:1;
    }
    .c{
      width:48%;
      height:78%;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.24);
      background: rgba(255,255,255,.82);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:hidden;
    }
    .stImg{
      width:100%;
      height:100%;
      object-fit:contain;
      transform: scale(1.16);
      transform-origin:center bottom;
      pointer-events:none;
      display:block;
    }
    .tag{
      position:absolute; bottom:10px; left:50%;
      transform:translateX(-50%);
      font-size:12px; color:var(--muted);
      background: rgba(255,255,255,.88);
      border:1px solid rgba(255,255,255,.24);
      border-radius:999px; padding:6px 10px;
      z-index:4;
    }
    .imgfail::before{
      content:"è´´çº¸æ²¡åŠ è½½åˆ°ï¼šç¡®è®¤ hachi.webp / usagi.webp åœ¨ä»“åº“æ ¹ç›®å½•ï¼ˆå¤§å°å†™ä¸€è‡´ï¼‰";
      position:absolute;
      inset:auto 10px 44px 10px;
      text-align:center;
      font-size:12px;
      color: rgba(27,21,48,.60);
      background: rgba(255,255,255,.60);
      border:1px dashed rgba(255,255,255,.35);
      border-radius:12px;
      padding:10px;
    }

    .shake{animation: shake .28s ease-in-out 1}
    @keyframes shake{
      0%{transform:translateX(0)}
      25%{transform:translateX(-6px)}
      50%{transform:translateX(6px)}
      75%{transform:translateX(-4px)}
      100%{transform:translateX(0)}
    }

    /* å³ä¾§ */
    .panel{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.24);
      background: rgba(255,255,255,.72);
      padding:14px;
      min-height:380px;
      position:relative;
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .title{margin:0 0 6px; font-size:22px; font-weight:950; letter-spacing:.2px;}
    .sub{margin:0 0 14px; color:var(--muted); line-height:1.6; font-size:14px;}

    .dialog{
      border:1px solid rgba(255,255,255,.26);
      background: rgba(255,255,255,.92);
      border-radius:16px;
      padding:12px 12px;
      line-height:1.7;
      box-shadow: 0 10px 24px rgba(20,8,60,.14);
      white-space:pre-line;
    }
    .options{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;}

    button{
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.86);
      border-radius:14px;
      padding:12px 14px;
      font-size:14px;
      cursor:pointer;
      box-shadow: 0 10px 24px rgba(20,8,60,.14);
      transition: transform .08s ease, box-shadow .2s ease, filter .2s ease;
      color: var(--ink);
      backdrop-filter: blur(8px);
    }
    button:hover{box-shadow:0 14px 34px rgba(20,8,60,.22); filter: brightness(1.02);}
    button:active{transform:translateY(1px) scale(.99)}
    .primary{
      border-color: rgba(124,58,237,.34);
      background: linear-gradient(180deg, rgba(167,139,250,.26), rgba(255,255,255,.92));
    }
    .danger{
      border-color: rgba(251,113,133,.32);
      background: linear-gradient(180deg, rgba(251,113,133,.18), rgba(255,255,255,.92));
    }
    .tiny-corner{
      position:absolute;
      right:12px;
      bottom:12px;
      font-size:12px;
      padding:8px 10px;
      border-radius:999px;
      opacity:.9;
    }

    .flash{
      position:absolute;
      inset:auto 0 56px 0;
      text-align:center;
      font-weight:950;
      letter-spacing:.5px;
      color: var(--accent);
      text-shadow: 0 10px 30px rgba(167,139,250,.55);
      animation: pop 0.35s ease-out 1, blink 1.1s ease-in-out infinite;
      pointer-events:none;
      padding:0 12px;
    }
    @keyframes pop{ from{transform:translateY(6px); opacity:0} to{transform:translateY(0); opacity:1} }
    @keyframes blink{ 0%,100%{opacity:.2} 50%{opacity:1} }

    .audioBox{
      margin-top:12px;
      border:1px dashed rgba(255,255,255,.28);
      border-radius:14px;
      padding:12px;
      background: rgba(255,255,255,.70);
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }
    audio{width:100%; margin-top:8px;}

    .footer{
      padding:12px 14px;
      border-top:1px solid rgba(255,255,255,.20);
      background: rgba(255,255,255,.66);
      color:var(--muted);
      font-size:12px;
      display:flex;
      gap:10px;
      justify-content:space-between;
      flex-wrap:wrap;
      backdrop-filter: blur(10px);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="pill">ğŸ’— Ranniå®å®</div>
      <div class="pill" id="today"></div>
      <div class="pill">ä¹Œè¨å¥‡ & å°å…«ï¼šåœ¨ç›¯ä½ </div>
    </div>

    <div class="card">
      <div class="main">
        <div>
          <div class="sticker" id="sticker">
            <div class="st-bubble" id="stBubble">Ranniå®å®ï½èµ·åºŠäº†å—ï¼Ÿ\nï¼ˆå°å…«ï¼šæˆ‘æ¥é—®ï¼ï¼‰</div>

            <div class="chars">
              <div class="c" id="cardHachi">
                <img class="stImg" id="imgHachi" alt="å°å…«">
                <div class="tag">å°å…«</div>
              </div>

              <div class="c" id="cardUsagi" style="background: rgba(255,247,239,.85);">
                <img class="stImg" id="imgUsagi" alt="ä¹Œè¨å¥‡">
                <div class="tag">ä¹Œè¨å¥‡</div>
              </div>
            </div>
          </div>
        </div>

        <div class="panel" id="panel">
          <h1 class="title" id="title">Ranniå®å®æ—©å®‰</h1>
          <p class="sub" id="sub">å…ˆå›ç­”ä¸€ä¸‹ï½</p>

          <div class="dialog" id="dialog"></div>
          <div class="options" id="options"></div>

          <div id="corner"></div>
          <div id="flashHost"></div>
        </div>
      </div>

      <div class="footer">
        <div>ğŸŒ™ è®°å¾—ç…§é¡¾è‡ªå·±ï¼Œä¹Ÿè®°å¾—æƒ³æˆ‘ã€‚</div>
        <div>â€” æº</div>
      </div>
    </div>
  </div>

<script>
  /** =========================
   *  é…ç½®åŒºï¼ˆä½ åªæ”¹è¿™é‡Œï¼‰
   *  ========================= */
  const SOURCE_NAME = "æº";

  // âœ… éŸ³ä¹ï¼šä½ ä»“åº“æ ¹ç›®å½•æ–‡ä»¶åå°±æ˜¯ swim.mp3ï¼ˆä½ æˆªå›¾é‡Œæœ‰ï¼‰
  const SWIM_AUDIO_URL = "swim.mp3";

  // âœ… Discord Webhookï¼šæŠŠæ–°å»ºçš„ webhook URL ç²˜è´´åˆ°è¿™é‡Œ
  const DISCORD_WEBHOOK_URL = "https://discord.com/api/webhooks/1474108439499112661/vf-Roj8DNsZB7RoFwy9b_abDwLPhY1XYdQ9WKUlEN1jTLoo_dHu-CsCWXJlk8GGW16qh"; // ä¾‹ï¼šhttps://discord.com/api/webhooks/xxx/yyy

  // âœ… @ä½ ï¼šå¡«ä½ çš„ Discord ç”¨æˆ·æ•°å­— IDï¼ˆDeveloper Mode â†’ Copy User IDï¼‰
  const MY_DISCORD_ID = "ivanxuuu"; // ä¾‹ï¼š123456789012345678
  const PING_MODE = "me";   // "me" / "here" / "everyone"

  /** =========================
   *  å·¥å…·
   *  ========================= */
  const $ = (s)=>document.querySelector(s);
  const sticker = $("#sticker");
  const stBubble = $("#stBubble");
  const titleEl = $("#title");
  const subEl = $("#sub");
  const dialogEl = $("#dialog");
  const optionsEl = $("#options");
  const cornerEl = $("#corner");
  const flashHost = $("#flashHost");

  function todayStr(){
    const d = new Date();
    const y = d.getFullYear();
    const m = String(d.getMonth()+1).padStart(2,"0");
    const day = String(d.getDate()).padStart(2,"0");
    return `${y}-${m}-${day}`;
  }
  $("#today").textContent = `ğŸ“… ${todayStr()}`;

  function hm(){
    const d = new Date();
    return String(d.getHours()).padStart(2,"0")+":"+String(d.getMinutes()).padStart(2,"0");
  }

  function basePath(){
    const p = location.pathname;
    return p.endsWith("/") ? p : p.slice(0, p.lastIndexOf("/") + 1);
  }

  function setStickerImgs(){
    const v = Date.now(); // é˜²ç¼“å­˜ï¼ˆå¾®ä¿¡æœ‰æ•ˆï¼‰
    const base = basePath();

    const imgH = $("#imgHachi");
    const imgU = $("#imgUsagi");

    imgH.src = base + "hachi.webp?v=" + v;
    imgU.src = base + "usagi.webp?v=" + v;

    imgH.onerror = () => $("#cardHachi").classList.add("imgfail");
    imgU.onerror = () => $("#cardUsagi").classList.add("imgfail");
  }
  setStickerImgs();

  function shake(){
    sticker.classList.remove("shake");
    void sticker.offsetWidth;
    sticker.classList.add("shake");
  }
  function setSticker(text){
    stBubble.textContent = text;
    shake();
  }
  function flash(text){
    flashHost.innerHTML = "";
    const d = document.createElement("div");
    d.className = "flash";
    d.textContent = text;
    flashHost.appendChild(d);
    setTimeout(()=>{ flashHost.innerHTML=""; }, 2000);
  }
  function clearUI(){
    optionsEl.innerHTML = "";
    cornerEl.innerHTML = "";
  }

  async function copyToClipboard(text){
    try{
      await navigator.clipboard.writeText(text);
      return true;
    }catch(e){
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      try{ document.execCommand("copy"); }catch(_){}
      document.body.removeChild(ta);
      return true;
    }
  }

  function openDiscord(){
    try{ window.location.href = "discord://"; }catch(e){}
    setTimeout(()=>{ try{ window.open("https://discord.com/channels/@me", "_blank"); }catch(e){} }, 1200);
  }

  async function notifyDiscord(level){
    if(!DISCORD_WEBHOOK_URL) return false;

    let ping = "";
    if(PING_MODE === "everyone") ping = "@everyone ";
    if(PING_MODE === "here") ping = "@here ";
    if(PING_MODE === "me" && MY_DISCORD_ID) ping = `<@${MY_DISCORD_ID}> `;

    try{
      const res = await fetch(DISCORD_WEBHOOK_URL, {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({
          content: `${ping}ğŸ’— Ranniç‚¹äº†ã€Œ${level}ã€ @ ${hm()}`
        })
      });
      return res.ok;
    }catch(e){
      return false;
    }
  }

  /** =========================
   *  éŸ³é¢‘ï¼ˆè§£å†³â€œæ²¡å£°éŸ³â€ï¼‰
   *  - iPhone/å¾®ä¿¡ç¦æ­¢è‡ªåŠ¨æ’­æ”¾ï¼šå¿…é¡»ç”¨æˆ·ç‚¹å‡»è§¦å‘ play()
   *  ========================= */
  let swimAudio = null;

  function ensureAudio(){
    if(swimAudio) return swimAudio;
    const base = basePath();
    const v = Date.now();
    swimAudio = new Audio(base + SWIM_AUDIO_URL + "?v=" + v);
    swimAudio.preload = "auto";
    swimAudio.loop = true;
    return swimAudio;
  }

  async function playSwim(){
    const a = ensureAudio();
    try{
      await a.play(); // å¿…é¡»ç”±ç‚¹å‡»è§¦å‘æ‰ä¼šæˆåŠŸ
      return true;
    }catch(e){
      return false;
    }
  }

  function stopSwim(){
    if(!swimAudio) return;
    try{ swimAudio.pause(); swimAudio.currentTime = 0; }catch(e){}
  }

  /** =========================
   *  æµç¨‹
   *  ========================= */
  let state = "start";
  let dontWantClicks = 0;

  function btn(text, onClick, cls=""){
    const b = document.createElement("button");
    b.textContent = text;
    b.className = cls;
    b.addEventListener("click", onClick);
    return b;
  }

  async function notifySource(level){
    const ok = await notifyDiscord(level);

    const msg = `Ranniï¼šæˆ‘${level}ä½ äº†ğŸ’—ï¼ˆ${hm()}ï¼‰`;
    await copyToClipboard(msg);
    openDiscord();

    dialogEl.textContent =
`æˆ‘æ”¶åˆ°äº†ï½ğŸ’—
ç°åœ¨å» Discord æˆ–å¾®ä¿¡ç»™${SOURCE_NAME}å‘ä¸€å¥å°±å¥½ï¼š
ã€Œ${msg}ã€
${DISCORD_WEBHOOK_URL ? (ok ? "\nï¼ˆæˆ‘è¿™è¾¹ Discord ä¹Ÿæ”¶åˆ°æç¤ºäº†âœ…ï¼‰" : "\nï¼ˆæˆ‘è¿™è¾¹ Discord æç¤ºæ²¡æ”¶åˆ°ï¼Œå…ˆæŒ‰ä¸Šé¢é‚£å¥å‘ç»™æˆ‘å°±è¡Œï¼‰") : ""}`;

    setSticker("æ”¶åˆ°ï½\nï¼ˆä¹Œè¨å¥‡ï¼šå“¼å“¼ï¼‰");
    flash("ğŸ’— å·²æ”¶åˆ°æƒ³ä½ ");
    clearUI();
    optionsEl.appendChild(btn("å†è¯´ä¸€æ¬¡ï¼ˆæ›´æƒ³ï¼‰", ()=>go("miss"), "primary"));
    optionsEl.appendChild(btn("å›åˆ°å¼€å¤´", ()=>go("start")));
  }

  function render(){
    clearUI();

    if(state === "start"){
      stopSwim();
      titleEl.textContent = "ç¬¬ä¸€å…³ï¼šèµ·åºŠæ£€æŸ¥";
      subEl.textContent = "ä¹Œè¨å¥‡å’Œå°å…«ä¸Šçº¿ã€‚";
      dialogEl.textContent = "Ranniå®å®ï½èµ·åºŠäº†å—ï¼Ÿ";
      setSticker("Ranniå®å®ï½èµ·åºŠäº†å—ï¼Ÿ\nï¼ˆå°å…«ï¼šæˆ‘æ¥é—®ï¼ï¼‰");

      optionsEl.appendChild(btn("èµ·åºŠäº†ï¼Œæº", ()=>go("awake"), "primary"));
      optionsEl.appendChild(btn("å†èµ–ä¸€ä¼šåºŠ~", ()=>go("sleep_in")));
      return;
    }

    if(state === "awake"){
      stopSwim();
      titleEl.textContent = "ç¬¬äºŒå…³ï¼šåƒé¥­ç¡®è®¤";
      subEl.textContent = "èµ·åºŠäº†ä¹Ÿè¦ç…§é¡¾è‡ªå·±ã€‚";
      dialogEl.textContent = "å¥½è€¶ï¼é‚£ä½ è¦è®°å¾—åƒé¥­å‘€ï½";
      setSticker("èµ·åºŠæˆåŠŸï¼\nï¼ˆä¹Œè¨å¥‡ï¼šä¸‹ä¸€æ­¥åƒé¥­ï¼ï¼‰");

      optionsEl.appendChild(btn("å¥½å“¦", ()=>go("miss"), "primary"));
      optionsEl.appendChild(btn("Ranniä¸é¥¿æ", ()=>go("not_hungry")));
      return;
    }

    if(state === "not_hungry"){
      stopSwim();
      titleEl.textContent = "æ”¯çº¿ï¼šä¸é¥¿ä¹Ÿè¦å«ä¸€ä¸‹";
      subEl.textContent = "è‡³å°‘å–ç‚¹æ°´/åƒä¸¤å£ã€‚";
      dialogEl.textContent =
"ä¸é¥¿ä¹Ÿå¯ä»¥å…ˆå«ä¸€ç‚¹ç‚¹ï½\næ¯”å¦‚ï¼šé…¸å¥¶/æ°´æœ/å°é¥¼å¹²/å–æ°´éƒ½è¡Œã€‚\n\né‚£æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥ï¼šè¦ä¸è¦æƒ³æºå‘€ï¼Ÿ";
      setSticker("ä¸é¥¿ä¹Ÿè¦ä¹–ã€‚\nï¼ˆå°å…«ï¼šä¸¤å£ä¹Ÿè¡Œï¼‰");

      optionsEl.appendChild(btn("ç»§ç»­", ()=>go("miss"), "primary"));
      return;
    }

    if(state === "miss"){
      stopSwim();
      titleEl.textContent = "ç¬¬ä¸‰å…³ï¼šæƒ³æºæµ‹è¯•";
      subEl.textContent = "è¯·é€‰æ‹©ä½ çš„çœŸå®æƒ³å¿µç¨‹åº¦ï¼ˆæ…é€‰ï¼‰ã€‚";
      dialogEl.textContent = "é‚£â€¦Ranniå®å®æœ‰æ²¡æœ‰æƒ³æºå‘€ï¼Ÿ";
      setSticker("æƒ³æºæµ‹è¯•å¼€å§‹ï¼\nï¼ˆä¹Œè¨å¥‡&å°å…«ï¼šç›¯â€”â€”ï¼‰");

      optionsEl.appendChild(btn("æƒ³", ()=>notifySource("æƒ³"), "primary"));
      optionsEl.appendChild(btn("ç‰¹åˆ«æƒ³", ()=>notifySource("ç‰¹åˆ«æƒ³"), "primary"));

      cornerEl.appendChild(btn("ä¸€ç‚¹éƒ½ä¸æƒ³", ()=>handleDontWant(), "tiny-corner danger"));
      return;
    }

    if(state === "sleep_in"){
      titleEl.textContent = "èµ–åºŠçº¿ï¼šæ¸¸ä¸€ä¼šå„¿";
      subEl.textContent = "ç‚¹ä¸€ä¸‹æŒ‰é’®æ‰ä¼šæœ‰å£°éŸ³ï¼ˆiPhone/å¾®ä¿¡è§„å®šï¼‰ã€‚";
      dialogEl.textContent = "é‚£æˆ‘ä»¬æ¸¸ä¸€ä¼šå„¿~ è®°å¾—ä¸€ä¼šå›æ¥å“¦ã€‚";
      setSticker("èµ–åºŠè®¸å¯é€šè¿‡ã€‚\nï¼ˆå°å…«ï¼šæ¸¸ä¸€ä¼šå„¿ï¼ï¼‰");

      const box = document.createElement("div");
      box.className = "audioBox";
      box.innerHTML =
`<b>ã€ŠSwimã€‹æ’­æ”¾åŒº</b><br/>
å¾®ä¿¡/ iPhone ä¸å…è®¸è‡ªåŠ¨æ’­æ”¾ï¼Œéœ€è¦ä½ ç‚¹â€œå¼€å§‹æ¸¸â€æ‰ä¼šå“ã€‚<br/>
å¦‚æœè¿˜æ˜¯æ²¡å£°éŸ³ï¼šæ£€æŸ¥æ‰‹æœºæ˜¯å¦é™éŸ³ + éŸ³é‡æ¡ã€‚`;

      const startBtn = btn("å¼€å§‹æ¸¸ï¼ˆç‚¹æˆ‘å‡ºå£°ï¼‰", async ()=>{
        const ok = await playSwim();
        flash(ok ? "å¼€å§‹æ¸¸ï½" : "æ²¡æ’­æ”¾æˆåŠŸï¼šæ£€æŸ¥é™éŸ³/éŸ³é‡");
      }, "primary");

      const stopBtn = btn("æš‚åœ", ()=>{
        stopSwim();
        flash("æš‚åœå•¦");
      });

      box.appendChild(startBtn);
      box.appendChild(stopBtn);

      optionsEl.appendChild(box);
      optionsEl.appendChild(btn("æˆ‘å›æ¥å•¦ï¼ˆç»§ç»­æµç¨‹ï¼‰", ()=>go("start"), "primary"));
      return;
    }
  }

  function handleDontWant(){
    dontWantClicks += 1;
    if(dontWantClicks === 1){
      flash("çœŸä¸æƒ³å—ï¼Ÿ");
      setSticker("å—¯ï¼Ÿ\nï¼ˆä¹Œè¨å¥‡ï¼šä½ å†è¯´ä¸€æ¬¡ï¼Ÿï¼‰");
    }else if(dontWantClicks === 2){
      flash("é‚£ç§äº‹æƒ…ä¸è¦å•Š");
      setSticker("ä¸å¯ä»¥ï¼\nï¼ˆå°å…«ï¼šæ‘‡å¤´ï¼‰");
    }else{
      flash("å¿…é¡»æƒ³ï¼ï¼ï¼");
      setSticker("å¿…é¡»æƒ³ï¼ï¼\nï¼ˆä¹Œè¨å¥‡ï¼šå°å°æŒ‰é’®ï¼‰");
      state = "forced_miss";
      renderForcedMiss();
    }
  }

  function renderForcedMiss(){
    stopSwim();
    clearUI();
    titleEl.textContent = "å¼ºåˆ¶å…³ï¼šå¿…é¡»æƒ³";
    subEl.textContent = "è§’è½æŒ‰é’®å·²è¢«å°å°ã€‚";
    dialogEl.textContent = "ä¸è®¸ï¼å¿…é¡»æƒ³ï¼ç°åœ¨é€‰ä¸€ä¸ªï¼š";
    optionsEl.appendChild(btn("æƒ³", ()=>notifySource("æƒ³"), "primary"));
    optionsEl.appendChild(btn("ç‰¹åˆ«æƒ³", ()=>notifySource("ç‰¹åˆ«æƒ³"), "primary"));
  }

  function go(next){
    state = next;
    render();
  }

  render();
</script>
</body>
</html>

